<div class="credit-container">
  <h1 class="main-title">SOLICITUD DE CRÉDITO</h1>
  
  <form [formGroup]="creditForm" (ngSubmit)="onSubmit()">
    <!-- Sección de datos personales -->
    <div class="form-section">
      <h2 class="section-title">Datos del solicitante:</h2>
      
      <div class="form-grid personal-data">
        <!-- Fila 1 -->
        <div class="form-field">
        
          <input type="text" class="gray-box2" formControlName="nombre">
          <div class="field-label">Nombre</div>
        </div>
        
        <div class="form-field">
         
          <input type="text" class="gray-box2" formControlName="apellidoPaterno">
           <div class="field-label">Apellido Paterno</div>
        </div>
  
<div class="form-field photo-upload">
  <div class="square-image-upload">
    <label for="profileImage">

      <div class="image-preview" [style.background-image]="'url(' + (profileImagePreview  || 'img/sinperfil.png') + ')'">

      </div>

      <input id="profileImage" type="file" accept="image/*" (change)="onImageUpload($event, 'foto')" hidden>
    </label>
  </div>
</div>

        
        <!-- Fila 2 -->
        <div class="form-field">
          
          <input type="text" class="gray-box2" formControlName="apellidoMaterno">
          <div class="field-label">Apellido Materno</div>
        </div>
        
        <div class="form-field">
          
          <input type="text"  class="gray-box2" formControlName="curp" placeholder="Ej. ABCD123456HABCDEF12">
          <div class="field-label">CURP</div>
        </div>
        
        <div class="form-field">
         
          <input type="tel" class="gray-box2" formControlName="telefono" placeholder="10 dígitos">
           <div class="field-label">Número de teléfono</div>
        </div>
        
        
        <div class="form-field">
        
          <input type="email"  class="gray-box2" formControlName="email">
            <div class="field-label">E-mail</div>
        </div>
        
        <!-- Fila 3 -->
        <div class="form-field">
          
          <select formControlName="vivienda" class="gray-box2">
            <option value="">Seleccione...</option>
            <option value="propia">Casa propia</option>
            <option value="prestada">Prestada</option>
            <option value="familiar">Familiar</option>
            <option value="renta">Renta</option>
          </select>
          <div class="field-label">Vivienda</div>
        </div>
        

        <div class="form-field">
          
          <input type="number" class="gray-box2" formControlName="antiguedadVivienda" min="0">
          <div class="field-label">Antigüedad (años)</div>
        </div>


        <div class="form-field">
          
          <input type="text"class="gray-box2"  formControlName="calle">
          <div class="field-label">Calle</div>
        </div>
        
        <div class="form-field">
          
          <input type="text" class="gray-box2" formControlName="numero">
          <div class="field-label">Número</div>
        </div>
        
        <!-- Fila 4 -->
        <div class="form-field">
       
          <input type="text"class="gray-box2"  formControlName="colonia">
             <div class="field-label">Colonia</div>
        </div>
        
        <div class="form-field">
        
          <input type="text"class="gray-box2"  formControlName="localidad">
            <div class="field-label">Localidad</div>
        </div>
        
        <div class="form-field">
          
          <input type="text" class="gray-box2" formControlName="cp" placeholder="5 dígitos">
          <div class="field-label">Código Postal</div>
        </div>
        
        <!-- Fila 5 -->
        <div class="form-field">
         
          <input type="text" class="gray-box2"  formControlName="estado">
           <div class="field-label">Estado</div>
        </div>
               
        <div class="form-field">          
          <select formControlName="EstadoCivil" class="gray-box2">
            <option value="">Seleccione...</option>
            <option value="propia">Soltero/a</option>
            <option value="prestada">Casado/a</option>
            <option value="familiar">Divorciado/a</option>
            <option value="renta">Viudo/a</option>
            <option value="renta">Concubinato/a</option>
          </select>
          <div class="field-label">Estado Civil</div>
        </div>
        
        <div class="form-field">         
          <input type="text" class="gray-box2" formControlName="conyuge">
           <div class="field-label">Nombre del cónyuge</div>
        </div>


         <div class="form-field">          
          <input type="text" class="gray-box2" formControlName="TelefonoCON" min="0">
          <div class="field-label">Telefono del cónyuge</div>
        </div>
        

  
         <div class="form-field">
          
          <input type="number" class="gray-box2" formControlName="OcupacionC" min="0">
          <div class="field-label">Ocupacion del cónyuge</div>
        </div>
        
        
        <div class="form-field">
          
          <input type="number" class="gray-box2" formControlName="hijos" min="0">
          <div class="field-label">Número de hijos</div>
        </div>
        
        <!-- Fila 6 -->
        <div class="form-field full-width">
          
          <input type="text" class="gray-box2" formControlName="vehiculo">
          <div class="field-label">Marca y modelo de la unidad móvil</div>
        </div>
        
      </div>
    </div>
    
    <!-- Sección de datos laborales -->
    <div class="form-section">
      <h2 class="section-title">Datos laborales del solicitante:</h2>
      
      <div class="form-grid">
        <div class="form-field">
          
          <input type="text" class="gray-box2" formControlName="direccionTrabajo">
          <div class="field-label">Dirección del negocio/empleo</div>
        </div>
        
        <div class="form-field">
          
          <input type="text" class="gray-box2" formControlName="puesto">
          <div class="field-label">Puesto que desempeña</div>
        </div>
        
        <div class="form-field">
          
          <input type="number" class="gray-box2" formControlName="antiguedad" min="0">
          <div class="field-label">Antigüedad (años)</div>
        </div>
        
        <div class="form-field">
         
          <input type="tel"class="gray-box2"  formControlName="telefonoTrabajo" placeholder="10 dígitos">
           <div class="field-label">Teléfono del trabajo</div>
        </div>
      </div>
    </div>
    
    <!-- Sección de datos del préstamo -->
    <div class="form-section">
      <h2 class="section-title">Datos del préstamo solicitado:</h2>
      
      <div class="gray-box">
        <div class="box-title">General</div>
        
        <div class="form-grid">
          <div class="form-field">
            
            <input type="number" class="gray-box2" formControlName="monto" min="1000">
            <div class="field-label">Monto solicitado ($)</div>
          </div>
          
          <div class="form-field">
            
            <input type="number" class="gray-box2" formControlName="plazo" min="1">
            <div class="field-label">Plazo (meses)</div>
          </div>
           
          <div class="form-field full-width">
            
            <textarea formControlName="proposito" class="gray-box2" rows="3"></textarea>
            <div class="field-label">Propósito del préstamo</div>
          </div>

        </div>
      </div>

      <div class="reference-grid">
        <div class="ie-column">
          <h3 class="ie-title">Ingresos Mensuales</h3>
           
         
          <div class="form-field">
            <div class="field-label">Ingresos extra (especifique)</div>

            <textarea type="text" class="gray-box2" formControlName="descripcionIngresosExtra"></textarea>

            <input type="number" formControlName="ingresosExtra" min="0">
          </div>
          
          <div class="form-field">
            <div class="field-label">Ganancias del negocio</div>
            <input type="number" formControlName="gananciasNegocio" min="0">
          </div>
          
          <div class="form-field total-field">
            
            <div class="field-label">Total ingresos</div>

            <div class="total-amount">{{ calcularTotalIngresos() | currency }}</div>
          </div>
        </div>
        
        <div class="ie-column">
          <h3 class="ie-title">Egresos Mensuales</h3>
          <div class="field-label">Servicios hogar</div>
          <div class="form-field">
            <div class="field-label">Servicios del hogar (luz, agua, gas, internet)</div>
            <input type="number" formControlName="gastosServiciosHogar" min="0">
          </div>
          
          <div class="form-field">
            <div class="field-label">Comida y vestido</div>
            <input type="number" formControlName="gastosComidaVestido" min="0">
          </div>
          
          <div class="form-field">
            <div class="field-label">Renta de vivienda (si aplica)</div>
            <input type="number" formControlName="gastosRentaVivienda" min="0">
          </div>
          
          <div class="form-field">
            <div class="field-label">Otros gastos personales</div>
            <input type="number" formControlName="otrosGastosPersonales" min="0">
          </div>
          <div class="field-label"  >Gastos del negocio</div>
          <div class="form-field">
            <div class="field-label">Servicios del negocio (luz, agua, internet)</div>
            <input type="number" formControlName="gastosServiciosNegocio" min="0">
          </div>
          
          <div class="form-field">
            <div class="field-label">Renta del negocio (si aplica)</div>
            <input type="number" formControlName="gastosRentaNegocio" min="0">
          </div>
          
          <div class="form-field">
            <div class="field-label">Inversión para el negocio</div>
            <input type="number" formControlName="inversionNegocio" min="0">
          </div>
          
          <div class="form-field total-field">
            <div class="field-label">Total egresos</div>
            <div class="total-amount">{{ calcularTotalEgresos() | currency }}</div>
          </div>
        </div> 
      </div>
    </div>
 <div class="form-field full-width">
          
          <input type="number" class="gray-box2" formControlName="Valormercancia">
          <div class="field-label">Valor estimado en mercancia, instrumentos de trabajo, (Maquinaria, muebles, etc.)</div>
        </div>
    <div class="form-section">
      <h2 class="section-title">Datos del aval y referencias personales:</h2>
      
      <div class="reference-grid">
        <!-- Sección de Aval -->
        <div class="reference-section">
          <h3 class="ie-title">Aval</h3>
          
          <div class="form-field">
            <div class="field-label">Nombre completo</div>
            <input type="text" class="gray-box2" formControlName="avalNombre">
          </div>
          
          <div class="form-field">
            <div class="field-label">Teléfono</div>
            <input type="tel" class="gray-box2" formControlName="avalTelefono">
          </div>
          
          <div class="form-field">
            <div class="field-label">Dirección</div>
            <div class="address-fields">
              <input type="text" class="gray-box2" formControlName="avalCalle" placeholder="Calle">
              <input type="text" class="gray-box2" formControlName="avalNumero" placeholder="Número">
              <input type="text"class="gray-box2"  formControlName="avalColonia" placeholder="Colonia">
              <input type="text"  class="gray-box2" formControlName="avalLocalidad" placeholder="Localidad">
              <input type="text" class="gray-box2" formControlName="avalCP" placeholder="C.P.">
              <input type="text" class="gray-box2" formControlName="avalEstado" placeholder="Estado">
            </div>
          </div>
          
          <div class="form-field">
            <div class="field-label">Ocupación</div>
            <input type="text" class="gray-box2" formControlName="avalOcupacion">
          </div>
          
          <div class="form-field">
            <div class="field-label">Tiempo de conocerlo</div>
            <input type="text" class="gray-box2"formControlName="avalTiempoConocido">
          </div>
        </div>
        
        <!-- Sección de Referencia -->
        <div class="reference-section">
          <h3 class="ie-title">Referencia personal</h3>
          
          <!-- Mismos campos que para el aval -->
          <div class="form-field">
            <div class="field-label">Nombre completo</div>
            <input type="text"class="gray-box2"  formControlName="referenciaNombre">
          </div>
          
          <div class="form-field">
            <div class="field-label">Teléfono</div>
            <input type="tel"class="gray-box2" formControlName="referencialTelefono">
          </div>
          
          <div class="form-field">
            <div class="field-label">Dirección</div>
            <div class="address-fields">
              <input type="text" class="gray-box2" formControlName="referenciaCalle" placeholder="Calle">
              <input type="text" class="gray-box2"formControlName="referenciaNumero" placeholder="Número">
              <input type="text"class="gray-box2" formControlName="referenciaColonia" placeholder="Colonia">
              <input type="text" class="gray-box2"formControlName="referenciaLocalidad" placeholder="Localidad">
              <input type="text" class="gray-box2"formControlName="referenciaCP" placeholder="C.P.">
              <input type="text" class="gray-box2" formControlName="referenciaEstado" placeholder="Estado">
            </div>
          </div>
          
          <div class="form-field">
            <div class="field-label">Ocupación</div>
            <input type="text" class="gray-box2"formControlName="referenciaOcupacion">
          </div>
          
          <div class="form-field">
            <div class="field-label">Tiempo de conocerlo</div>
            <input type="text" class="gray-box2"formControlName="referenciaTiempoConocido">
          </div>
        </div>
      </div>
      
      <div class="map-section">

        <div class="form-field">
          <div class="field-label">Mapa de ubicación de casa</div>
          <input type="text" class="gray-box2"formControlName="mapaCasa" placeholder="URL o coordenadas">


  <div class="form-field photo-upload"> 
  <div class="field-label">Mapa de ubicación casa</div>          
  <div class="square-image-upload">
    <label for="ubicacionCasaImage">
      <div class="image-preview" [style.background-image]="'url(' + (ubicacionCasaPreview  || 'img/sinperfil.png') + ')'"></div>
      <input id="ubicacionCasaImage" type="file" accept="image/*" (change)="onImageUpload($event, 'ubicacionCasa')" hidden>            
    </label>
  </div>
</div>
        </div>
        <div class="form-field">
          <div class="field-label">Mapa de ubicación negocio/empleo</div>
          <input type="text" class="gray-box2"formControlName="mapaTrabajo" placeholder="URL o coordenadas">


  <div class="form-field photo-upload"> 
  <div class="field-label">Mapa de ubicación negocio/empleo</div>          
  <div class="square-image-upload">
    <label for="ubicacionTrabajo">
      <div class="image-preview" [style.background-image]="'url(' + (ubicacionTrabajoPreview  || 'img/sinperfil.png') + ')'"></div>
      <input id="ubicacionTrabajo" type="file" accept="image/*" (change)="onImageUpload($event, 'ubicacionTrabajo')" hidden>            
    </label>
  </div>
</div>
        </div>



 
 
      </div>
    </div> 
<!-- Dentro de la sección de autorización -->
<div class="authorization-section">
  <h2 class="section-title">Autorización para consulta de historial crediticio</h2>
  
  <div class="authorization-box">
    <p class="authorization-text">
      "Por este medio autorizo que mi información crediticia sea utilizada para los fines que al interesado le convengan"
    </p>


    
    <div class="signature-field">

      <div class="field-label">Firma de autorización</div>

      <div class="signature-container">


        <canvas #signaturePad width="400" height="200"></canvas>

        <div class="signature-actions">
          <button type="button" class="clear-signature" (click)="clearSignature()">
            Limpiar Firma
          </button>
        </div>    
        
        
      </div>

    </div>



  </div>
</div>
 
 
    <div class="form-actions">
      <button type="submit" class="submit-btn" [disabled]="!creditForm.valid">Enviar Solicitud</button>
    </div>
  </form>
</div>